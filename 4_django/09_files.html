
<!DOCTYPE html>


<html lang="cs" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RZX7DQPSHE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-RZX7DQPSHE');
    </script>
    
    <title>Práce se soubory &#8212; Webové aplikace</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../_static/local.css?v=1256093c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=4cdba38b"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script src="../_static/translations.js?v=0275affc"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '4_django/09_files';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Rejstřík" href="../genindex.html" />
    <link rel="search" title="Vyhledávání" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="cs"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Webové aplikace</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Vyhledávání" aria-label="Vyhledávání" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Vyhledávání</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Úvod</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../0_introduction/01_overview.html">Úvod do internetových technologií</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_introduction/04_git.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_introduction/05_markdown.html">Markdown</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Statický web</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../1_static/01_html.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_static/02_css.html">Základy CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_static/03_layouts.html">CSS Layouty</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">JavaScript</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../2_javascript/01_intro.html">Seznámení s JavaScriptem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_javascript/02_blocks.html">Řídící bloky</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_javascript/03_methods.html">Funkce a třídy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_javascript/04_modules.html">Moduly v JavaScriptu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_javascript/05_dom.html">Document Object Model</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../3_python/01_intro.html">Seznámení s jazykem Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_python/02_types.html">Datové typy v Pythonu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_python/03_blocks.html">Řídící bloky</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_python/04_methods.html">Funkce a třídy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_python/05_packages.html">Balíčky</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_python/06_pip.html">PIP, Python Virtual Environment</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Django</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_framework.html">Webové frameworky</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_project.html">Seznámení s Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_sessions.html">Cookies, sessions a uživatelé</a></li>
<li class="toctree-l1"><a class="reference internal" href="13_api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_deploy.html">Produkční prostředí</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Webové protokoly</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../5_protocols/01_http.html">Protokol HTTP</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Webdesign</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../6_webdesign/01_wireframe.html">Wireframe návrh</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Ostatní</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../7_other/01_legal.html">Web a právo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_other/02_ethics.html">Etika webových aplikací</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_other/03_analytics.html">Webová analytika</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Materiály</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../materials.html">Materiály k výuce</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Stáhněte si tuto stránku">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/4_django/09_files.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Stáhněte si zdrojový soubor"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Tisk do PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Režim celé obrazovky"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Vyhledávání" aria-label="Vyhledávání" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Práce se soubory</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Obsah </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prace-se-soubory-v-django">Práce se soubory v Django</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pouziti-v-modelu">Použití v modelu</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zobrazeni-souboru-ve-view">Zobrazení souboru ve view</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nahrani-souboru">Nahrání souboru</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="prace-se-soubory">
<h1>Práce se soubory<a class="headerlink" href="#prace-se-soubory" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.djangoproject.com/en/5.1/topics/files/">Django dokumentace - soubory</a></p></li>
</ul>
<p>Ve webových aplikacích je práce se soubory běžnou součástí funkcionality, například při nahrávání obrázků, dokumentů nebo jiných médií. Soubory se neukládají přímo do databáze, neboť by to vedlo velkému nárůstu velikosti databáze, což by způsobovalo problémy s jejím výkonem a údržbou (škálování, zálohování atd.). Místo toho se soubory ukládají na disk a databáze ukládají pouze metadata, jako je cesta k souboru, jeho název, případně velikost souboru.</p>
<section id="prace-se-soubory-v-django">
<h2>1.&nbsp;&nbsp;Práce se soubory v Django<a class="headerlink" href="#prace-se-soubory-v-django" title="Link to this heading">#</a></h2>
<p>Django poskytuje robustní podporu pro práci se soubory prostřednictvím polí  <strong><code class="docutils literal notranslate"><span class="pre">FileField</span></code></strong> a <strong><code class="docutils literal notranslate"><span class="pre">ImageField</span></code></strong>, které lze použít v modelech.</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">FileField</span></code></strong> je pole modelu určené k ukládání souborů. Umožňuje specifikovat cestu kam se má soubor ukládat a poskytuje API pro práci s tímto souborem.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ImageField</span></code></strong> rozšiřuje funkcionalitu <code class="docutils literal notranslate"><span class="pre">FileField</span></code> tím, že kontroluje, zda nahraný soubor je platný obrázek.</p></li>
</ul>
<p>Django ukládá soubory do adresáře <code class="docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code>, specifikovaného v konfiguračním souboru settings.py v projektu:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># my_project/settings.py</span>

<span class="c1"># ...</span>
<span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="n">BASE_DIR</span> <span class="o">/</span> <span class="s1">&#39;media&#39;</span>
</pre></div>
</div>
<p>A dále je potřeba ještě nastavit <code class="docutils literal notranslate"><span class="pre">MEDIA_URL</span></code>, což je url adresa, pod kterou budou soubory dostupné:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># my_project/settings.py</span>

<span class="c1"># ...</span>
<span class="n">MEDIA_URL</span> <span class="o">=</span> <span class="s1">&#39;media&#39;</span>
</pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Poznámka</p>
<p>Pole typu <code class="docutils literal notranslate"><span class="pre">ImageField</span></code> vyžaduje Python balíček <code class="docutils literal notranslate"><span class="pre">Pillow</span></code>, který lze nainstalovat pomocí <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">Pillow</span></code> nebo přidáním do <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> a instalací pomocí <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code>.</p>
</div>
<p>Dále je potřeba namapovat url směřující na <code class="docutils literal notranslate"><span class="pre">MEDIA_URL</span></code> do adresáře <code class="docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code>, kde jsou soubory skutečně uloženy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># my_project/urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.conf.urls.static</span> <span class="kn">import</span> <span class="n">static</span>
<span class="c1"># ...</span>
<span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
    <span class="n">urlpatterns</span><span class="o">+=</span><span class="n">static</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span><span class="p">,</span> <span class="n">document_root</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_ROOT</span><span class="p">)</span>
</pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Vývojový server</p>
<p>Podmíněné mapování pomocí <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">settings.DEBUG</span></code> je kvůli tomu, aby soubory byly takto dostupné jen v rámci vývojového prostředí. V produkčním prostředí mapování kvůli rychlosti řeší přímo na webovém serveru, jak si ukážeme v pozdějších kapitolách.</p>
</div>
<section id="pouziti-v-modelu">
<h3>1.1.&nbsp;&nbsp;Použití v modelu<a class="headerlink" href="#pouziti-v-modelu" title="Link to this heading">#</a></h3>
<p>Upravme si model Book z minulých kapitol tak, aby umožňoval přidání obrázku přebalu knížky:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="n">cover</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s2">&quot;books/cover&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Parametr <code class="docutils literal notranslate"><span class="pre">upload_to</span></code> u <code class="docutils literal notranslate"><span class="pre">ImageField</span></code> pole (stejně tak u <code class="docutils literal notranslate"><span class="pre">FileField</span></code>) určuje, kam se budou soubory v rámci adresáře <code class="docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code> ukládat.</p>
<p>Když do modelu přidáte <code class="docutils literal notranslate"><span class="pre">FileField</span></code> nebo <code class="docutils literal notranslate"><span class="pre">ImageField</span></code>, Django admin automaticky poskytne rozhraní pro nahrání souborů.</p>
</section>
<section id="zobrazeni-souboru-ve-view">
<h3>1.2.&nbsp;&nbsp;Zobrazení souboru ve view<a class="headerlink" href="#zobrazeni-souboru-ve-view" title="Link to this heading">#</a></h3>
<p>Chcete-li zobrazit soubor v pohledu, můžete použít cestu <code class="docutils literal notranslate"><span class="pre">url</span></code> uloženou v poli <code class="docutils literal notranslate"><span class="pre">FileField</span></code> nebo <code class="docutils literal notranslate"><span class="pre">ImageField</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">book</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">if</span> <span class="n">book</span><span class="o">.</span><span class="n">cover</span><span class="p">:</span>
    <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">book</span><span class="o">.</span><span class="n">cover</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s1">&quot; alt=&quot;</span><span class="si">{</span><span class="n">book</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
</pre></div>
</div>
<p>Nebo v šabloně:</p>
<div class="highlight-django notranslate"><div class="highlight"><pre><span></span><span class="x">&lt;img src=&quot;</span><span class="cp">{{</span> <span class="nv">book.cover.url</span> <span class="cp">}}</span><span class="x">&quot; alt=&quot;</span><span class="cp">{{</span> <span class="nv">book.title</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span>
</pre></div>
</div>
<p>Testování <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">book.cover</span></code> je vhodné k ověření, že nějaký soubor je k objektu skutečně nahrán. Kromě atributu <code class="docutils literal notranslate"><span class="pre">url</span></code> mají pole <code class="docutils literal notranslate"><span class="pre">FileField</span></code> nebo <code class="docutils literal notranslate"><span class="pre">ImageField</span></code> dostupné také další atributy:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">path</span></code></strong>: úplná cesta k souboru</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">size</span></code></strong>: velikost k souboru v bajtech</p></li>
</ul>
<p>Pole <code class="docutils literal notranslate"><span class="pre">ImageField</span></code> mají ještě navíc atributy <code class="docutils literal notranslate"><span class="pre">width</span></code> a <code class="docutils literal notranslate"><span class="pre">height</span></code>, které obsahují rozměry obrázku.</p>
</section>
<section id="nahrani-souboru">
<h3>1.3.&nbsp;&nbsp;Nahrání souboru<a class="headerlink" href="#nahrani-souboru" title="Link to this heading">#</a></h3>
<p>Pokud chceme vytvořit stránku, kde budou moci návštěvníci nahrávat soubory, které budeme následně ukládat, je potřeba nejprve vytvořit formulář pro nahrání souborů a ten zobrazit na stránce:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FileUploadForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">FileField</span><span class="p">()</span>
</pre></div>
</div>
<p>Formulář pak zpracujeme stejně jako jiné formuláře:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ...</span>
<span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">==</span><span class="s2">&quot;POST&quot;</span><span class="p">:</span>
        <span class="n">form</span><span class="o">=</span><span class="n">FileUploadForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">file</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">size</span><span class="si">}</span><span class="s2"> bytes) uploaded&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">form</span><span class="o">=</span><span class="n">FileUploadForm</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;my_app/upload.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;form&quot;</span><span class="p">:</span> <span class="n">form</span><span class="p">})</span>
</pre></div>
</div>
<p>Další informace o tom, jak pracovat se soubory naleznete v <a class="reference external" href="https://docs.djangoproject.com/en/5.1/topics/files/">dokumentaci</a>.</p>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Obsah
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prace-se-soubory-v-django">Práce se soubory v Django</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pouziti-v-modelu">Použití v modelu</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zobrazeni-souboru-ve-view">Zobrazení souboru ve view</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nahrani-souboru">Nahrání souboru</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Podle kf
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, kf..
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>